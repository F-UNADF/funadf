.breadcrumbs
  .page-header
    %h1 Gestion des utilisateurs


.content.mt-3
  .container-fluid
    .card
      .card-header
        %strong Liste des utilisateurs
        .card-actions

          = link_to new_user_invitation_path, class: "btn-setting" do
            = icon 'plus'
            Ajouter

          = link_to admin_import_path(:get_file), class: "btn-setting" do
            = icon "upload"
            Importer depuis un fichier

      .card-body
        .table-responsive
          %table.table.table-striped.table-sm
            %thead
              %tr
                %th Identifiant
                %th Nom
                %th Email
                %th Téléphone
                %th Niveau
                %th

            - @users.each do |user|
              %tr
                %td= user.friendly_id
                %td
                  = link_to user, class: "text-info" do
                    = user.fullname
                    = icon "eye"
                %td= user.email
                %td= user.phone_1
                %td= user.level
                %td
                  - if user.id == current_user.id
                    %em C'est vous !
                  - else
                    %ul.list-inline.mb-0
                      - if can? :edit, user
                        %li.list-inline-item
                          = link_to [:edit, :admin, user], class: "text-success" do
                            = icon "edit"
                            Modifier
                      - if can? :delete, user
                        %li.list-inline-item
                          = link_to [:admin, user], method: :delete, data:{confirm: 'Êtes vous sûr ?'}, class: "text-danger" do
                            = icon "times"
                            Supprimer

        .float-right
          = will_paginate @users